---
{
  "title": "How to select examples from a LangSmith dataset",
  "source_url": "https://python.langchain.com/docs/how_to/example_selectors_langsmith/",
  "fetched_at": "2025-08-15T13:50:04.512141+00:00"
}
---

# How to select examples from a LangSmith dataset

from
langchain
.
chat_models
import
init_chat_model
from
langchain_benchmarks
.
tool_usage
.
tasks
.
multiverse_math
import
(
add
,
cos
,
divide
,
log
,
multiply
,
negate
,
pi
,
power
,
sin
,
subtract
,
)
from
langchain_core
.
runnables
import
RunnableLambda
from
langsmith
import
AsyncClient
as
AsyncLangSmith
async_ls_client
=
AsyncLangSmith
(
)
def
similar_examples
(
input_
:
dict
)
-
>
dict
:
examples
=
ls_client
.
similar_examples
(
input_
,
limit
=
5
,
dataset_id
=
dataset_id
)
return
{
**
input_
,
"examples"
:
examples
}
async
def
asimilar_examples
(
input_
:
dict
)
-
>
dict
:
examples
=
await
async_ls_client
.
similar_examples
(
input_
,
limit
=
5
,
dataset_id
=
dataset_id
)
return
{
**
input_
,
"examples"
:
examples
}
def
construct_prompt
(
input_
:
dict
)
-
>
list
:
instructions
=
"""You are great at using mathematical tools."""
examples
=
[
]
for
ex
in
input_
[
"examples"
]
:
examples
.
append
(
{
"role"
:
"user"
,
"content"
:
ex
.
inputs
[
"question"
]
}
)
for
msg
in
ex
.
outputs
[
"conversation"
]
:
if
msg
[
"role"
]
==
"assistant"
:
msg
[
"name"
]
=
"example_assistant"
if
msg
[
"role"
]
==
"user"
:
msg
[
"name"
]
=
"example_user"
examples
.
append
(
msg
)
return
[
{
"role"
:
"system"
,
"content"
:
instructions
}
,
*
examples
,
{
"role"
:
"user"
,
"content"
:
input_
[
"question"
]
}
,
]
tools
=
[
add
,
cos
,
divide
,
log
,
multiply
,
negate
,
pi
,
power
,
sin
,
subtract
]
llm
=
init_chat_model
(
"gpt-4o-2024-08-06"
)
llm_with_tools
=
llm
.
bind_tools
(
tools
)
example_selector
=
RunnableLambda
(
func
=
similar_examples
,
afunc
=
asimilar_examples
)
chain
=
example_selector
|
construct_prompt
|
llm_with_tools
