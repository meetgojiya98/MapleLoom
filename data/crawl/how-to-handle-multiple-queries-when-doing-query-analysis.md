---
{
  "title": "How to handle multiple queries when doing query analysis",
  "source_url": "https://python.langchain.com/docs/how_to/query_multiple_queries/",
  "fetched_at": "2025-08-15T13:49:19.368047+00:00"
}
---

# How to handle multiple queries when doing query analysis

from
langchain_core
.
output_parsers
.
openai_tools
import
PydanticToolsParser
from
langchain_core
.
prompts
import
ChatPromptTemplate
from
langchain_core
.
runnables
import
RunnablePassthrough
from
langchain_openai
import
ChatOpenAI
output_parser
=
PydanticToolsParser
(
tools
=
[
Search
]
)
system
=
"""You have the ability to issue search queries to get information to help answer user information.
If you need to look up two distinct pieces of information, you are allowed to do that!"""
prompt
=
ChatPromptTemplate
.
from_messages
(
[
(
"system"
,
system
)
,
(
"human"
,
"{question}"
)
,
]
)
llm
=
ChatOpenAI
(
model
=
"gpt-4o-mini"
,
temperature
=
0
)
structured_llm
=
llm
.
with_structured_output
(
Search
)
query_analyzer
=
{
"question"
:
RunnablePassthrough
(
)
}
|
prompt
|
structured_llm
