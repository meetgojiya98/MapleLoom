---
{
  "title": "How to create custom callback handlers",
  "source_url": "https://python.langchain.com/docs/how_to/custom_callbacks/",
  "fetched_at": "2025-08-15T13:49:46.410029+00:00"
}
---

# How to create custom callback handlers

from
langchain_anthropic
import
ChatAnthropic
from
langchain_core
.
callbacks
import
BaseCallbackHandler
from
langchain_core
.
prompts
import
ChatPromptTemplate
class
MyCustomHandler
(
BaseCallbackHandler
)
:
def
on_llm_new_token
(
self
,
token
:
str
,
**
kwargs
)
-
>
None
:
print
(
f"My custom handler, token:
{
token
}
"
)
prompt
=
ChatPromptTemplate
.
from_messages
(
[
"Tell me a joke about {animal}"
]
)
model
=
ChatAnthropic
(
model
=
"claude-3-7-sonnet-20250219"
,
streaming
=
True
,
callbacks
=
[
MyCustomHandler
(
)
]
)
chain
=
prompt
|
model
response
=
chain
.
invoke
(
{
"animal"
:
"bears"
}
)
